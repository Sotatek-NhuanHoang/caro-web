{"version":3,"sources":["../../SharedResource/SocketClientEvents.js","../../SharedResource/SocketServerEvents.js","config/index.js","api/BaseApi.js","api/RoomApi.js","service/AlertService.js","store/match.js","store/room.js","socket/RoomHandler.js","socket/MatchHandler.js","store/score.js","socket/ScoreHandler.js","socket/index.js","api/UserApi.js","store/user.js","store/store.js","service/SpinnerService.js","screens/LoginScreen/LoginScreen.js","screens/RoomScreen/CreatorName.js","screens/RoomScreen/RoomItem.js","screens/RoomScreen/RoomScreen.js","screens/MatchScreen/CaroBoardSquare.js","screens/MatchScreen/CaroBoard.js","screens/MatchScreen/UserScore.js","screens/MatchScreen/CompetitorUser.js","screens/MatchScreen/CurrentUser.js","screens/MatchScreen/MatchScreen.js","Router.js","App.js","index.js","socket/combineHandlers.js","../../SharedResource/RoomStatus.js","assets/images/o.png","assets/images/x.png"],"names":["module","exports","user_AUTHENTICATION","room_EXIT","match_STROKE","match_READY_NEW_GAME","match_WIN","room_ADD_NEW","room_REMOVE","room_UPDATE","room_JOIN","score_UPDATE","SquareType","X","O","Config","API_SERVER_URL","SOCKET_SERVER_URL","CARO_BOARD_ROW","CARO_BOARD_COLUMN","FIRST_MOVE_SQUARE_TYPE","SECOND_MOVE_SQUARE_TYPE","Api","create","baseURL","headers","Accept","Content-Type","BaseApi","GET","_GET","Object","asyncToGenerator","regenerator_default","a","mark","_callee","endPoint","params","_store$getState","user","token","response","_args","arguments","wrap","_context","prev","next","length","undefined","store","getState","_","get","Authorization","sent","ok","Error","data","message","abrupt","t0","stop","_x","apply","this","POST","_POST","_callee2","_store$getState2","_args2","_context2","post","_x2","PUT","_PUT","_callee3","_store$getState3","_args3","_context3","put","_x3","DELETE","RoomApi","getRooms","page","createRoom","joinRoom","roomId","alertOptions","theme","timeout","layout","progressBar","showError","msg","Noty","objectSpread","type","text","show","defaultState","firstMoveUserId","winnerId","isCurentUserTurn","squares","winningSquares","currentUserReadyNewGame","competitorUserReadyNewGame","checkHorizontal","row","column","rootSquareType","boardRow","boardColumn","defineProperty","i","squareIndex","keys","checkVertical","checkLeftBias","x","y","checkRightBias","checkWinningMatchFromIndex","squareType","checkers","match_RESET","createAction","match_UPDATE_STATE","reducer","handleActions","state","_ref","payload","cloneDeep","_ref2","fromJS","mergeDeep","toJS","squareSelector","createSelector","match","_ref3","winningSquareSelector","_ref4","room_UPDATE_STATE","_ref5","removeIn","rooms","total","limit","isGettingRooms","getRoomsError","creatingRoom","createRoomError","currentRoomId","sortedRoomIdsSelector","room","currentUser","_ref6","availableRooms","filter","status","RoomStatus","WAITING","creatorUserId","id","sortedRooms","sortBy","updated","map","roomSelector","_ref7","RoomHandler","eventName","SocketServerEvents","dispatch","user_UPDATE_STATE","otherUsers","creatorUser","_id","competitorUser","_getState","competitorUserId","competitorSquareIndex","competitorSquareType","nextMatch","score_UPDATE_STATE","scores","scoreSelector","score","userId","ScoreHandler","rawScores","reduce","memo","item","socket","io","socketWildcard","Manager","eventHandler","combineHandlers","MatchHandler","on","emit","SocketClientEvents","_data","slicedToArray","UserApi","login","accessToken","facebookId","isLogging","loginError","otherUserSelector","reducers","combineReducers","global","globalReducer","roomReducer","persistReducer","key","storage","whitelist","userReducer","matchReducer","scoreReducer","middleWares","thunk","enhancer","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","applyMiddleware","createStore","persistor","persistStore","showSpinner","document","getElementById","overlayElement","createElement","body","appendChild","ReactDOM","render","react_default","className","react_spinners","color","size","hideSpinner","remove","LoginScreen","props","currentUserId","history","push","prevProps","_this","FB","getLoginStatus","authResponse","userID","_login","_this2","onClick","onLoginButtonPressed","PureComponent","connect","username","avatar","user_LOGIN","CreatorName","ownProps","RoomItem","onRoomItemClicked","_joinRoom","RoomScreen_CreatorName","joinedRoom","_x4","room_JOIN_ROOM","RoomScreen","trackScrolling","wrappedElement","isBottom","_getRooms","onNewRoomButtonClicked","_createRoom","addEventListener","removeEventListener","el","getBoundingClientRect","bottom","innerHeight","_this$props","roomIds","RoomScreen_RoomItem","loading","totalRooms","shouldRefresh","rawRooms","rawCreatorUsers","creatorUsers","room_GET_ROOMS","newRoom","CaroBoardSquare","stroke","_stroke","renderXO","react","alt","src","oImage","xImage","isWinningSquare","renderWinningOverlay","currentRoom","CaroBoard","Array","rowIndex","col","columnIndex","screens_MatchScreen_CaroBoardSquare","UserScore","CompetitorUser","MatchScreen_UserScore","CurrentUser","MatchScreen","onBackButtonPressed","_exitRoom","onExitRoomButtonClicked","_playNewGame","_reMatch","title","_ref$confirmText","confirmText","onConfirm","_ref$cancelText","cancelText","onCancel","confirmAlert","buttons","label","showConfirmAlert","_this$props2","screens_MatchScreen_CaroBoard","screens_MatchScreen_CompetitorUser","screens_MatchScreen_CurrentUser","_getState3","_getState4","_getState2","Router","BrowserRouter","Route","path","exact","component","RoomsScreen","App","es","integration_react","Router_Router","Component","src_App","setImmediate","handlers","_loop","PLAYING","__webpack_require__","p"],"mappings":"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","file":"static/js/main.2485f926.chunk.js","sourcesContent":["module.exports = {\n  user_AUTHENTICATION: 'user_AUTHENTICATION',\n  room_EXIT: 'room_EXIT',\n  match_STROKE: 'match_STROKE',\n  match_READY_NEW_GAME: 'match_READY_NEW_GAME',\n  match_WIN: 'match_WIN'\n};","module.exports = {\n  room_ADD_NEW: 'room_ADD_NEW',\n  room_REMOVE: 'room_REMOVE',\n  room_UPDATE: 'room_UPDATE',\n  room_JOIN: 'room_JOIN',\n  room_EXIT: 'room_EXIT',\n  match_STROKE: 'match_STROKE',\n  match_READY_NEW_GAME: 'match_READY_NEW_GAME',\n  score_UPDATE: 'score_UPDATE'\n};","export const SquareType = {\n    X: 'X',\n    O: 'O',\n};\n\nconst Config = {\n    API_SERVER_URL: 'https://caro-api.herokuapp.com/v1',\n    SOCKET_SERVER_URL: 'https://caro-socket.herokuapp.com',\n    CARO_BOARD_ROW: 30,\n    CARO_BOARD_COLUMN: 48,\n    FIRST_MOVE_SQUARE_TYPE: SquareType.X,\n    SECOND_MOVE_SQUARE_TYPE: SquareType.O,\n};\n\n\nexport default Config;\n","import { create } from 'apisauce';\nimport Config from 'caro-config';\nimport store from 'caro-store';\nimport _ from 'lodash';\n\n\nconst Api = create({\n    baseURL: Config.API_SERVER_URL,\n    headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n    },  \n});\n\n\nconst BaseApi = {\n    GET: async (endPoint, params = {}) => {\n        const { user } = store.getState();\n        const token = _.get(user, ['currentUser', 'token']);\n\n        try {\n            const response = await Api.get(endPoint, params, {\n                headers: {\n                    'Authorization': 'Bearer ' + token,\n                },\n            });\n\n            if (!response.ok) {\n                throw new Error(response.data.message);\n            }\n\n            return response.data;\n        } catch (error) {\n            throw error;\n        }\n    },\n\n    POST: async (endPoint, params = {}) => {\n        const { user } = store.getState();\n        const token = _.get(user, ['currentUser', 'token']);\n\n        try {\n            const response = await Api.post(endPoint, params, {\n                headers: {\n                    'Authorization': 'Bearer ' + token,\n                },\n            });\n\n            if (!response.ok) {\n                throw new Error(response.data.message);\n            }\n\n            return response.data;\n        } catch (error) {\n            throw error;\n        }\n    },\n\n    PUT: async (endPoint, params = {}) => {\n        const { user } = store.getState();\n        const token = _.get(user, ['currentUser', 'token']);\n\n        try {\n            const response = await Api.put(endPoint, params, {\n                headers: {\n                    'Authorization': 'Bearer ' + token,\n                },\n            });\n\n            if (!response.ok) {\n                throw new Error(response.data.message);\n            }\n\n            return response.data;\n        } catch (error) {\n            throw error;\n        }\n    },\n\n    DELETE: () => {},\n};\n\n\nexport default BaseApi;\n","import BaseApi from './BaseApi';\n\n\nconst RoomApi = {\n    getRooms: (page) => {\n        return BaseApi.GET('/rooms/available', { page: page, });\n    },\n\n    createRoom: () => {\n        return BaseApi.POST('/rooms');\n    },\n\n    joinRoom: (roomId) => {\n        return BaseApi.PUT('/rooms/join', {\n            roomId: roomId,\n        });\n    },\n};\n\n\nexport default RoomApi;\n","import Noty from 'noty';\nimport { confirmAlert } from 'react-confirm-alert';\n\n\nconst alertOptions = {\n    theme: 'sunset',\n    timeout: 1000,\n    layout: 'bottomCenter',\n    progressBar: false,\n};\n\nexport const showError = (msg) => {\n    new Noty({\n        type: 'alert',\n        text: msg,\n        ...alertOptions\n    }).show();\n};\n\n\nexport const showConfirmAlert = ({ title, message, confirmText = 'Yes', onConfirm, cancelText = 'No', onCancel}) => {\n    confirmAlert({\n        title: title,\n        message: message,\n        buttons: [\n            {\n                label: confirmText,\n                onClick: onConfirm\n            },\n            {\n                label: cancelText,\n                onClick: onCancel\n            }\n        ],\n    });\n};\n","import { handleActions, createAction } from 'redux-actions';\nimport { fromJS } from 'immutable';\nimport { createSelector } from 'reselect';\nimport Config from 'caro-config';\nimport _ from 'lodash';\nimport SocketClientEvents from 'caro-shared-resource/SocketClientEvents';\nimport socket from 'caro-socket';\nimport { showError } from 'caro-service/AlertService';\n\n\n\n/**\n * =====================================================\n * Default state\n * =====================================================\n */\n\nconst defaultState = {\n    firstMoveUserId: null,\n    winnerId: null,\n    isCurentUserTurn: false,\n    squares: {},\n    winningSquares: {},\n\n    currentUserReadyNewGame: false,\n    competitorUserReadyNewGame: false,\n};\n\n\nconst checkHorizontal = (row, column, squares, rootSquareType, boardRow, boardColumn) => {\n    const winningSquares = {\n        [row + ',' + column]: true,\n    };\n\n    // Count left side\n    for (let i = (column - 1); i >= 0; i--) {\n        const squareIndex = row + ',' + i;\n        const squareType = squares[squareIndex];\n\n        if (squareType === rootSquareType) {\n            winningSquares[squareIndex] = true;\n        } else {\n            break;\n        }\n    }\n\n    // Count right side\n    for (let i = (column + 1); i < boardColumn; i++) {\n        const squareIndex = row + ',' + i;\n        const squareType = squares[squareIndex];\n\n        if (squareType === rootSquareType) {\n            winningSquares[squareIndex] = true;\n        } else {\n            break;\n        }\n    }\n\n    if (_.keys(winningSquares).length >= 5) {\n        return winningSquares;\n    } else {\n        return null;\n    }\n};\n\nconst checkVertical = (row, column, squares, rootSquareType, boardRow) => {\n    const winningSquares = {\n        [row + ',' + column]: true,\n    };\n\n    // Count top\n    for (let i = (row - 1); i >= 0; i--) {\n        const squareIndex = i + ',' + column;\n        const squareType = squares[squareIndex];\n\n        if (squareType === rootSquareType) {\n            winningSquares[squareIndex] = true;\n        } else {\n            break;\n        }\n    }\n\n    // Count bottom\n    for (let i = (row + 1); i < boardRow; i++) {\n        const squareIndex = i + ',' + column;\n        const squareType = squares[squareIndex];\n\n        if (squareType === rootSquareType) {\n            winningSquares[squareIndex] = true;\n        } else {\n            break;\n        }\n    }\n\n    if (_.keys(winningSquares).length >= 5) {\n        return winningSquares;\n    } else {\n        return null;\n    }\n};\n\nconst checkLeftBias = (row, column, squares, rootSquareType, boardRow, boardColumn) => {\n    const winningSquares = {\n        [row + ',' + column]: true,\n    };\n\n    // Count top\n    for (let x = (row - 1), y = (column - 1) ; x >= 0 && y >= 0; x--, y--) {\n        const squareIndex = x + ',' + y;\n        const squareType = squares[squareIndex];\n\n        if (squareType === rootSquareType) {\n            winningSquares[squareIndex] = true;\n        } else {\n            break;\n        }\n    }\n\n    // Count bottom\n    for (let x = (row + 1), y = (column + 1) ; x < boardRow && y < boardColumn; x++, y++) {\n        const squareIndex = x + ',' + y;\n        const squareType = squares[squareIndex];\n\n        if (squareType === rootSquareType) {\n            winningSquares[squareIndex] = true;\n        } else {\n            break;\n        }\n    }\n\n    if (_.keys(winningSquares).length >= 5) {\n        return winningSquares;\n    } else {\n        return null;\n    }\n};\n\nconst checkRightBias = (row, column, squares, rootSquareType, boardRow, boardColumn) => {\n    const winningSquares = {\n        [row + ',' + column]: true,\n    };\n\n    // Count top\n    for (let x = (row - 1), y = (column + 1) ; x >= 0 && y < boardColumn; x--, y++) {\n        const squareIndex = x + ',' + y;\n        const squareType = squares[squareIndex];\n\n        if (squareType === rootSquareType) {\n            winningSquares[squareIndex] = true;\n        } else {\n            break;\n        }\n    }\n\n    // Count bottom\n    for (let x = (row + 1), y = (column - 1) ; x < boardRow && y >= 0; x++, y--) {\n        const squareIndex = x + ',' + y;\n        const squareType = squares[squareIndex];\n\n        if (squareType === rootSquareType) {\n            winningSquares[squareIndex] = true;\n        } else {\n            break;\n        }\n    }\n\n    if (_.keys(winningSquares).length >= 5) {\n        return winningSquares;\n    } else {\n        return null;\n    }\n};\n\n\nexport const checkWinningMatchFromIndex = (squares, row, column) => {\n    const squareIndex = row + ',' + column;\n    const squareType = squares[squareIndex];\n    const checkers = [\n        checkHorizontal,\n        checkVertical,\n        checkLeftBias,\n        checkRightBias\n    ];\n\n    for (let i = 0; i < checkers.length; i++) {\n        const winningSquares = checkers[i](row, column, squares, squareType, Config.CARO_BOARD_ROW, Config.CARO_BOARD_COLUMN);\n        \n        if (winningSquares) {\n            return winningSquares;\n        }\n    }\n};\n\n\n/**\n * =====================================================\n * Actions\n * =====================================================\n */\n\nexport const match_RESET = createAction('match_RESET');\n\nexport const match_UPDATE_STATE = createAction('match_UPDATE_STATE');\n\nexport const match_STROKE = (row, column) => (dispatch, getState) => {\n    const { match, user, room } = getState();\n    const { isCurentUserTurn, squares, firstMoveUserId } = match;\n\n    if (!firstMoveUserId) {\n        showError('Waiting user ...');\n        return;\n    }\n\n    if (!isCurentUserTurn) {\n        showError('Not your turn!');\n        return;\n    }\n\n    const squareIndex = row + ',' + column;\n\n    if (squares[squareIndex]) {\n        return;\n    }\n\n    const { currentUser } = user;\n    const squareType = (currentUser.id === firstMoveUserId) ? Config.FIRST_MOVE_SQUARE_TYPE : Config.SECOND_MOVE_SQUARE_TYPE;\n    const currentRoom = room.rooms[room.currentRoomId];\n    const competitorUserId = currentRoom.creatorUserId === currentUser.id ? currentRoom.competitorUserId : currentRoom.creatorUserId;\n\n    dispatch(match_UPDATE_STATE({\n        isCurentUserTurn: false,\n        squares: {\n            [squareIndex]: squareType,\n        },\n    }));\n\n    socket.emit(SocketClientEvents.match_STROKE, {\n        roomId: currentRoom.id,\n        row: row,\n        column: column,\n        competitorUserId: competitorUserId,\n        userId: currentUser.id,\n    });\n\n    const { match: nextMatch } = getState();\n    const winningSquares = checkWinningMatchFromIndex(nextMatch.squares, row, column);\n\n    if (winningSquares) {\n        dispatch(match_UPDATE_STATE({\n            winningSquares: winningSquares,\n            winnerId: currentUser.id,\n        }));\n        socket.emit(SocketClientEvents.match_WIN, {\n            userId: currentUser.id,\n            competitorUserId: competitorUserId,\n        });\n    }\n};\n\nexport const match_READY_NEW_GAME = () => (dispatch, getState) => {\n    const { user, room, match } = getState();\n    const { currentUser } = user;\n\n    if (!match.winnerId) {\n        return;\n    }\n\n    const currentRoom = room.rooms[room.currentRoomId];\n    const competitorUserId = (currentRoom.creatorUserId === currentUser.id) ? currentRoom.competitorUserId : currentRoom.creatorUserId;\n\n    if (!currentRoom.competitorUserId) {\n        return;\n    }\n    \n    dispatch(match_UPDATE_STATE({\n        currentUserReadyNewGame: true,\n    }));\n    \n    socket.emit(SocketClientEvents.match_READY_NEW_GAME, {\n        roomId: currentRoom.id,\n        competitorUserId: competitorUserId,\n    });\n};\n\nexport const match_REMATCH = () => (dispatch, getState) => {\n    const { match, user, room } = getState();\n    const { currentUser } = user;\n    const { winnerId } = match;\n    const currentRoom = room.rooms[room.currentRoomId];\n\n    const isCurentUserTurn = (currentUser.id !== winnerId); // Loser go first\n    const competitorUserId = (currentRoom.creatorUserId === currentUser.id) ? currentRoom.competitorUserId : currentRoom.creatorUserId;\n\n    dispatch(match_RESET({\n        isCurentUserTurn: isCurentUserTurn,\n        firstMoveUserId: isCurentUserTurn ? currentUser.id : competitorUserId,\n    }));\n};\n\n\n\n/**\n * =====================================================\n * Reducer\n * =====================================================\n */\n\nexport const reducer = handleActions({\n    match_RESET: (state, { payload }) => {\n        return {\n            ..._.cloneDeep(defaultState),\n            ...payload,\n        };\n    },\n\n    match_UPDATE_STATE: (state, { payload }) => {\n        return fromJS(state)\n            .mergeDeep(payload)\n            .toJS();\n    },\n}, defaultState);\n\n\n\n/**\n * =====================================================\n * Selectors\n * =====================================================\n */\n\nexport const squareSelector = createSelector(\n    (match, row, column) => ({ squares: match.squares, row: row, column: column}),\n    ({ squares, row, column }) => {\n        const squareIndex = row + ',' + column;\n        return squares[squareIndex];\n    }\n);\n\nexport const winningSquareSelector = createSelector(\n    (match, row, column) => ({ winningSquares: match.winningSquares, row: row, column: column}),\n    ({ winningSquares, row, column }) => {\n        const squareIndex = row + ',' + column;\n        return winningSquares[squareIndex] || false;\n    }\n);\n\n\n\nexport default reducer;\n","import { handleActions, createAction } from 'redux-actions';\nimport { fromJS } from 'immutable';\nimport RoomApi from 'caro-api/RoomApi';\nimport { user_UPDATE_STATE } from './user';\nimport { match_RESET } from './match';\nimport { createSelector } from 'reselect';\nimport _ from 'lodash';\nimport RoomStatus from 'caro-shared-resource/RoomStatus';\nimport socket from 'caro-socket';\nimport SocketClientEvents from 'caro-shared-resource/SocketClientEvents';\n\n\n\n/**\n * =====================================================\n * Default state\n * =====================================================\n */\nconst defaultState = {\n    rooms: {},\n    total: 0,\n    page: 1,\n    limit: 20,\n\n    isGettingRooms: false,\n    getRoomsError: null,\n\n    creatingRoom: false,\n    createRoomError: null,\n\n    currentRoomId: null,\n};\n\n\n\n/**\n * =====================================================\n * Actions\n * =====================================================\n */\n\nexport const room_UPDATE_STATE = createAction('room_UPDATE_STATE');\n\nexport const room_UPDATE_ONE = createAction('room_UPDATE_ONE');\n\nexport const room_REMOVE = createAction('room_REMOVE');\n\nexport const room_GET_ROOMS = (shouldRefresh = false) => async (dispatch, getState) => {\n    const { room } = getState();\n    const page = shouldRefresh ? 1 : (room.page + 1);\n\n    if (room.isGettingRooms) {\n        return;\n    }\n\n    if (\n        !shouldRefresh &&\n        (page - 1) * room.limit > room.total\n    ) {\n        return;\n    }\n\n    // Set loading\n    dispatch(room_UPDATE_STATE({\n        isGettingRooms: true,\n        getRoomsError: null,\n    }));\n\n    try {\n        const response = await RoomApi.getRooms(page, room.limit);\n        const { rooms: rawRooms, total, creatorUsers: rawCreatorUsers } = response;\n        \n        const creatorUsers = _.reduce(rawCreatorUsers, (memo, user) => {\n            memo[user._id] = {\n                id: user._id,\n                ...user,\n            };\n            return memo;\n        }, {});\n        dispatch(user_UPDATE_STATE({\n            otherUsers: {\n                ...creatorUsers,\n            },\n        }));\n\n        const rooms = _.reduce(rawRooms, (memo, room) => {\n            memo[room._id] = {\n                id: room._id,\n                ...room,\n            };\n            return memo;\n        }, {});\n        dispatch(room_UPDATE_STATE({\n            isGettingRooms: false,\n            rooms: rooms,\n            total: total,\n            page: page,\n        }));\n    } catch (error) {\n        dispatch(room_UPDATE_STATE({\n            isGettingRooms: false,\n            getRoomsError: error.message,\n        }));\n    }\n};\n\n\nexport const room_NEW_ROOM = () => async (dispatch) => {\n    dispatch(room_UPDATE_STATE({\n        creatingRoom: true,\n        createRoomError: null,\n    }));\n\n    try {\n       const newRoom = await RoomApi.createRoom();\n\n       dispatch(room_UPDATE_STATE({\n            rooms: {\n                [newRoom._id]: {\n                    id: newRoom._id,\n                    ...newRoom\n                }\n            },\n            currentRoomId: newRoom._id,\n            creatingRoom: false,\n        }));\n    } catch (error) {\n        dispatch(room_UPDATE_STATE({\n            creatingRoom: false,\n            createRoomError: error.message,\n        }));\n    }\n};\n\nexport const room_JOIN_ROOM = (roomId) => async (dispatch) => {\n    dispatch(room_UPDATE_STATE({\n        creatingRoom: true,\n        createRoomError: null,\n    }));\n\n    try {\n        const response = await RoomApi.joinRoom(roomId);\n        const { room: joinedRoom, creatorUser } = response;\n\n        dispatch(user_UPDATE_STATE({\n            otherUsers: {\n                [creatorUser._id]: {\n                    id: creatorUser._id,\n                    ...creatorUser,\n                }\n            }\n        }));\n        dispatch(room_UPDATE_STATE({\n            rooms: {\n                [joinedRoom._id]: {\n                    id: joinedRoom._id,\n                    ...joinedRoom\n                }\n            },\n            currentRoomId: joinedRoom._id,\n            creatingRoom: false,\n        }));\n        dispatch(match_RESET({\n            firstMoveUserId: creatorUser._id,\n        }));\n    } catch (error) {\n        dispatch(room_UPDATE_STATE({\n            creatingRoom: false,\n            createRoomError: error.message,\n        }));\n    }\n};\n\nexport const room_OUT_ROOM = () => (dispatch, getState) => {\n    const { room, user } = getState();\n    const { currentRoomId } = room;\n    const { currentUser } = user;\n\n\n    if (!currentRoomId) {\n        return;\n    }\n\n    const currentRoom = room.rooms[currentRoomId];\n    const competitorUserId = currentRoom.creatorUserId === currentUser.id ? currentRoom.competitorUserId : currentRoom.creatorUserId;\n\n    dispatch(room_UPDATE_STATE({\n        currentRoomId: null,\n    }));\n    dispatch(match_RESET());\n\n    socket.emit(SocketClientEvents.room_EXIT, {\n        roomId: currentRoomId,\n        userId: currentUser.id,\n        competitorUserId: competitorUserId,\n    });\n};\n\n\n\n/**\n * =====================================================\n * Reducer\n * =====================================================\n */\n\nexport const reducer = handleActions({\n    room_UPDATE_STATE: (state, { payload }) => {\n        return fromJS(state)\n            .mergeDeep(payload)\n            .toJS();\n    },\n\n    room_REMOVE: (state, { payload }) => {\n        const { roomId } = payload;\n        return fromJS(state)\n            .removeIn(['rooms', roomId])\n            .toJS();\n    }\n}, defaultState);\n\n\n\n/**\n * =====================================================\n * Selectors\n * =====================================================\n */\n\nexport const sortedRoomIdsSelector = createSelector(\n    (room, user) => ({ rooms: room.rooms, currentUser: user.currentUser, }),\n    ({ rooms, currentUser }) => {\n        const availableRooms = _.filter(rooms, (room) => {\n            return (room.status === RoomStatus.WAITING && room.creatorUserId !== currentUser.id);\n        });\n        const sortedRooms = _.sortBy(availableRooms, (room) => {\n            return -room.updated;\n        });\n        const sortedRoomIds = _.map(sortedRooms, (room) => room.id);\n        return sortedRoomIds;\n    }\n);\n\nexport const roomSelector = createSelector(\n    (room, roomId) => ({ rooms: room.rooms, roomId: roomId, }),\n    ({ rooms, roomId }) => {\n        return rooms[roomId];\n    }\n);\n\n\n\nexport default reducer;\n","import SocketServerEvents from 'caro-shared-resource/SocketServerEvents';\nimport { dispatch, getState } from 'caro-store';\nimport { room_UPDATE_STATE, room_REMOVE } from 'caro-store/room';\nimport { user_UPDATE_STATE } from 'caro-store/user';\nimport { match_RESET } from 'caro-store/match';\n\n\nconst RoomHandler = (eventName, params) => {\n    switch (eventName) {\n        case SocketServerEvents.room_ADD_NEW: {\n            dispatch(user_UPDATE_STATE({\n                otherUsers: {\n                    [params.creatorUser._id]: {\n                        id: params.creatorUser._id,\n                        ...params.creatorUser,\n                    }\n                }\n            }));\n            dispatch(room_UPDATE_STATE({\n                rooms: {\n                    [params.room._id]: {\n                        id: params.room._id,\n                        ...params.room\n                    },\n                },\n            }));\n            break;\n        }\n        \n        case SocketServerEvents.room_REMOVE: {\n            const { roomId } = params;\n            dispatch(room_REMOVE({ roomId: roomId, }));\n            break;\n        }\n        \n        case SocketServerEvents.room_JOIN: {\n            dispatch(user_UPDATE_STATE({\n                otherUsers: {\n                    [params.competitorUser._id]: {\n                        id: params.competitorUser._id,\n                        ...params.competitorUser,\n                    }\n                }\n            }));\n            dispatch(room_UPDATE_STATE({\n                rooms: {\n                    [params.room._id]: {\n                        id: params.room._id,\n                        ...params.room\n                    },\n                },\n            }));\n            dispatch(match_RESET({\n                firstMoveUserId: params.room.creatorUserId,\n                isCurentUserTurn: true,\n            }));\n            break;\n        }\n\n        case SocketServerEvents.room_EXIT: {\n            const { roomId } = params;\n            const { user, room } = getState();\n            const { currentUser } = user;\n\n            if (roomId !== room.currentRoomId) {\n                return;\n            }\n\n            dispatch(room_UPDATE_STATE({\n                rooms: {\n                    [roomId]: {\n                        creatorUserId: currentUser.id,\n                        competitorUserId: null,\n                    },\n                },\n            }));\n            dispatch(match_RESET({\n                firstMoveUserId: null,\n            }));\n            break;\n        }\n\n        default:\n            break;\n    }\n};\n\n\nexport default RoomHandler;\n","import SocketServerEvents from 'caro-shared-resource/SocketServerEvents';\nimport { dispatch, getState } from 'caro-store';\nimport { match_UPDATE_STATE, checkWinningMatchFromIndex } from 'caro-store/match';\nimport Config from 'caro-config';\n\n\nconst RoomHandler = (eventName, params) => {\n    switch (eventName) {\n        case SocketServerEvents.match_STROKE: {\n            const { roomId, row, column, competitorUserId } = params;\n            const { room, match, user } = getState();\n            \n            if (roomId !== room.currentRoomId) {\n                return;\n            }\n\n            const { currentUser } = user;\n            const { firstMoveUserId } = match;\n            const competitorSquareIndex = row + ',' + column;\n            const competitorSquareType = currentUser.id === firstMoveUserId ? Config.SECOND_MOVE_SQUARE_TYPE : Config.FIRST_MOVE_SQUARE_TYPE;\n\n            dispatch(match_UPDATE_STATE({\n                squares: {\n                    [competitorSquareIndex]: competitorSquareType,\n                },\n            }));\n\n            const { match: nextMatch } = getState();\n            const winningSquares = checkWinningMatchFromIndex(nextMatch.squares, row, column);\n\n            if (winningSquares) {\n                dispatch(match_UPDATE_STATE({\n                    winningSquares: winningSquares,\n                    winnerId: competitorUserId,\n                }));\n            } else {\n                dispatch(match_UPDATE_STATE({\n                    isCurentUserTurn: true,\n                }));\n            }\n            break;\n        }\n\n        case SocketServerEvents.match_READY_NEW_GAME: {\n            const { roomId } = params;\n            const { room } = getState();\n            \n            if (roomId !== room.currentRoomId) {\n                return;\n            }\n\n            dispatch(match_UPDATE_STATE({\n                competitorUserReadyNewGame: true,\n            }));\n            break;\n        }\n\n        default:\n            break;\n    }\n};\n\n\nexport default RoomHandler;\n","import { handleActions, createAction } from 'redux-actions';\nimport { fromJS } from 'immutable';\nimport { createSelector } from 'reselect';\n// import _ from 'lodash';\n\n\n\n/**\n * =====================================================\n * Default state\n * =====================================================\n */\nconst defaultState = {\n    scores: {}, // [currentUserId,competitorUserId]: number\n};\n\n\n\n/**\n * =====================================================\n * Actions\n * =====================================================\n */\n\nexport const score_UPDATE_STATE = createAction('score_UPDATE_STATE');\n\n\n\n\n/**\n * =====================================================\n * Reducer\n * =====================================================\n */\n\nexport const reducer = handleActions({\n    score_UPDATE_STATE: (state, { payload }) => {\n        return fromJS(state)\n            .mergeDeep(payload)\n            .toJS();\n    },\n}, defaultState);\n\n\n\n/**\n * =====================================================\n * Selectors\n * =====================================================\n */\n\nexport const scoreSelector = createSelector(\n    (score, userId, competitorUserId) => ({ scores: score.scores, userId: userId, competitorUserId: competitorUserId }),\n    ({ scores, userId, competitorUserId }) => {\n        const scoreKey = userId + ',' + competitorUserId;\n        return scores[scoreKey] || 0;\n    }\n);\n\n\n\nexport default reducer;\n","import SocketServerEvents from 'caro-shared-resource/SocketServerEvents';\nimport { dispatch } from 'caro-store';\nimport { score_UPDATE_STATE } from 'caro-store/score';\nimport _ from 'lodash';\n\n\nconst ScoreHandler = (eventName, params) => {\n    switch (eventName) {\n        case SocketServerEvents.score_UPDATE: {\n            const { scores: rawScores } = params;\n            const scores = _.reduce(rawScores, (memo, item) => {\n                const { userId, competitorUserId, score } = item;\n                const scoreKey = userId + ',' + competitorUserId;\n                memo[scoreKey] = score;\n                return memo;\n            }, {});\n            dispatch(score_UPDATE_STATE({\n                scores: {\n                    ...scores,\n                },\n            }))\n            break;\n        }\n\n        default:\n            break;\n    }\n};\n\n\nexport default ScoreHandler;\n","import io from 'socket.io-client';\nimport socketWildcard from 'socketio-wildcard';\nimport Config from 'caro-config';\nimport _ from 'lodash';\nimport SocketClientEvents from 'caro-shared-resource/SocketClientEvents';\n\nimport combineHandlers from './combineHandlers';\nimport RoomHandler from './RoomHandler';\nimport MatchHandler from './MatchHandler';\nimport ScoreHandler from './ScoreHandler';\nimport { getState } from 'caro-store';\n\n\nconst socket = io(Config.SOCKET_SERVER_URL);\nsocketWildcard(io.Manager)(socket);\n\nconst eventHandler = combineHandlers([\n    RoomHandler,\n    MatchHandler,\n    ScoreHandler\n]);\n\n\nsocket.on('connect', function () {\n    const { user } = getState();\n    const token = _.get(user, ['currentUser', 'token']);\n\n    if (token) {\n        socket.emit(SocketClientEvents.user_AUTHENTICATION, { token: token, });\n    }\n\n    socket.on('*', ({ data }) => {\n        const [ eventName, params ] = data;\n        eventHandler(eventName, params);\n        // console.log('socket: ', eventName, params);\n    });\n});\n\n\nexport default socket;\n","import BaseApi from './BaseApi';\n\n\nconst UserApi = {\n    login: ({ accessToken, facebookId }) => {\n        return BaseApi.POST('/users/facebook/login', {\n            accessToken: accessToken,\n            facebookId: facebookId,\n        });\n    },\n};\n\n\nexport default UserApi;\n","import { handleActions, createAction } from 'redux-actions';\nimport { fromJS } from 'immutable';\nimport { createSelector } from 'reselect';\nimport socket from 'caro-socket';\nimport SocketClientEvents from 'caro-shared-resource/SocketClientEvents';\nimport UserApi from 'caro-api/UserApi';\n\n\n\n/**\n * =====================================================\n * Default state\n * =====================================================\n */\nconst defaultState = {\n    otherUsers: {},\n    currentUser: {},\n    isLogging: false,\n    loginError: null,\n};\n\n\n\n/**\n * =====================================================\n * Actions\n * =====================================================\n */\n\nexport const user_UPDATE_STATE = createAction('user_UPDATE_STATE');\n\nexport const user_LOGIN = ({ accessToken, facebookId }) => async (dispatch) => {\n    // Loading\n    dispatch(user_UPDATE_STATE({ isLogging: true, loginError: null, }));\n\n    try {\n        const response = await UserApi.login({ accessToken: accessToken, facebookId: facebookId, });\n        \n        // Update current user\n        dispatch(user_UPDATE_STATE({\n            isLogging: false,\n            currentUser: {\n                id: response._id,\n                facebookId: response.facebookId,\n                username: response.username,\n                avatar: response.avatar,\n                token: response.token,\n            },\n        }));\n\n        socket.emit(SocketClientEvents.user_AUTHENTICATION, { token: response.token, });\n    } catch (error) {\n        dispatch(user_UPDATE_STATE({\n            isLogging: false,\n            loginError: error.message,\n        }));\n    }\n};\n\n\n\n\n/**\n * =====================================================\n * Reducer\n * =====================================================\n */\n\nexport const reducer = handleActions({\n    user_UPDATE_STATE: (state, { payload }) => {\n        return fromJS(state)\n            .mergeDeep(payload)\n            .toJS();\n    },\n}, defaultState);\n\n\n\n/**\n * =====================================================\n * Selectors\n * =====================================================\n */\n\nexport const otherUserSelector = createSelector(\n    (user, userId) => ({ otherUsers: user.otherUsers, userId: userId, }),\n    ({ otherUsers, userId }) => {\n        return otherUsers[userId];\n    }\n);\n\n\n\n\nexport default reducer;\n","import { createStore, combineReducers, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport { persistStore, persistReducer } from 'redux-persist';\nimport storage from 'redux-persist/lib/storage';\n\n\n// reducers\nimport globalReducer from './user';\nimport roomReducer from './room';\nimport userReducer from './user';\nimport matchReducer from './match';\nimport scoreReducer from './score';\n\n\nconst reducers = combineReducers({\n    global: globalReducer,\n    room: roomReducer,\n    user: persistReducer({\n        key: 'user-a',\n        storage: storage,\n        whitelist: ['currentUser'],\n    }, userReducer),\n    match: matchReducer,\n    score: scoreReducer,\n});\n\n\nconst middleWares = [thunk];\n\nif (process.env.NODE_ENV === 'development') {\n    const { logger } = require(`redux-logger`);\n    middleWares.push(logger);\n}\n\nconst composeEnhancers =\n    typeof window === 'object' &&\n    (window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ && process.env.NODE_ENV) ?   \n        window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}) :\n        (middleWares) => middleWares;\n\nconst enhancer = composeEnhancers (\n  applyMiddleware(...middleWares),\n);\n\nconst store = createStore(\n    reducers,\n    enhancer\n);\n\n\nexport const persistor = persistStore(store);\n\nexport const dispatch = store.dispatch;\nexport const getState = store.getState;\n\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { PacmanLoader } from 'react-spinners';\n\nconst spinnerId = 'caro-spinner';\n\n\nexport const showSpinner = () => {\n    if (document.getElementById(spinnerId)) {\n        return;\n    }\n\n    const overlayElement = document.createElement('div');\n    overlayElement.id = spinnerId;\n    document.body.appendChild(overlayElement);\n\n    ReactDOM.render(\n        <div className=\"caro-spinner-container\">\n            <PacmanLoader color=\"#95a5a6\" size={ 25 } />\n        </div>,\n        document.getElementById(spinnerId)\n    );\n};\n\n\nexport const hideSpinner = () => {\n    document.getElementById(spinnerId).remove();\n};\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\n\nimport { user_LOGIN } from 'caro-store/user';\nimport { showSpinner, hideSpinner } from 'caro-service/SpinnerService';\n\nimport './LoginScreen.scss';\n\n\nclass LoginScreen extends PureComponent {\n\n    componentWillMount() {\n        if (this.props.currentUserId) {\n            this.props.history.push('/rooms');\n        }\n    }\n\n    componentDidUpdate(prevProps) {\n        if (!prevProps.isLogging && this.props.isLogging) {\n            showSpinner();\n        }\n\n        if (prevProps.isLogging && !this.props.isLogging) {\n            hideSpinner();\n        }\n\n        if (!prevProps.currentUserId && this.props.currentUserId) {\n            this.props.history.push('/rooms');\n        }\n    }\n\n    onLoginButtonPressed() {\n        const FB = window.FB;\n\n        FB.login(() => {\n            FB.getLoginStatus((response) => {\n                if (response.status !== 'connected') {\n                    return;\n                }\n\n                const { authResponse } = response;\n                const { accessToken, userID: facebookId } = authResponse;\n\n                this.props._login(accessToken, facebookId);\n            });\n        });\n    }\n\n    render() {\n        return (\n            <div id=\"login-screen\">\n                <h1>Caro online</h1>\n\n                {/* Facebook login button */}\n                <button className=\"loginBtn loginBtn--facebook\" onClick={() => this.onLoginButtonPressed()}>\n                    Login with Facebook\n                </button>\n            </div>\n        );\n    }\n}\n\n\nconst mapStateToProps = ({ user }) => ({\n    currentUserId: user.currentUser.id,\n    isLogging: user.isLogging,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n    _login: (accessToken, facebookId) => {\n        return dispatch(user_LOGIN({\n            accessToken: accessToken,\n            facebookId: facebookId,\n        }));\n    },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LoginScreen);\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\n\nimport { otherUserSelector } from 'caro-store/user';\n\n\nclass CreatorName extends PureComponent {\n\n    render() {\n        const { user } = this.props;\n\n        if (!user) {\n            return null;\n        }\n\n        return (\n            <span>\n                { user.username }\n            </span>\n        );\n    }\n}\n\n\nconst mapStateToProps = ({ user }, ownProps) => ({\n    user: otherUserSelector(user, ownProps.userId),\n});\n\n\nexport default connect(mapStateToProps)(CreatorName);\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\n\nimport CreatorName from './CreatorName';\nimport { roomSelector, room_JOIN_ROOM } from 'caro-store/room';\n\nclass RoomItem extends PureComponent {\n\n    onRoomItemClicked = () => {\n        const { room } = this.props;\n\n        if (!room) {\n            return null;\n        }\n\n        this.props._joinRoom(room.id);\n    }\n\n    render() {\n        const { room } = this.props;\n\n        if (!room) {\n            return null;\n        }\n\n        return (\n            <tr className=\"room-item\" onClick={ this.onRoomItemClicked }>\n                <td>\n                    <CreatorName userId={ room.creatorUserId } />\n                </td>\n                <td className=\"text-right\">1/2</td>\n            </tr>\n        );\n    }\n}\n\n\nconst mapStateToProps = ({ room }, ownProps) => ({\n    room: roomSelector(room, ownProps.roomId),\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n    _joinRoom: (roomId) => {\n        return dispatch(room_JOIN_ROOM(roomId));\n    }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RoomItem);\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\nimport { BeatLoader } from 'react-spinners';\n\nimport { room_GET_ROOMS, sortedRoomIdsSelector, room_NEW_ROOM } from 'caro-store/room';\nimport RoomItem from './RoomItem';\nimport { showSpinner, hideSpinner } from 'caro-service/SpinnerService';\n\nimport './RoomScreen.scss';\n\n\nclass RoomScreen extends PureComponent {\n\n    componentDidMount() {\n        this.props._getRooms(true);\n        document.addEventListener('scroll', this.trackScrolling);\n    }\n\n    componentDidUpdate(prevProps) {\n        if (!prevProps.creatingRoom && this.props.creatingRoom) {\n            showSpinner();\n        }\n\n        if (prevProps.creatingRoom && !this.props.creatingRoom) {\n            hideSpinner();\n        }\n\n        if (!prevProps.currentRoomId && this.props.currentRoomId) {\n            this.props.history.push('match');\n        }\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('scroll', this.trackScrolling);\n    }\n\n    isBottom(el) {\n        return el.getBoundingClientRect().bottom <= window.innerHeight;\n    }\n\n    trackScrolling = () => {\n        const wrappedElement = document.getElementById('room-screen-container');\n\n        if (this.isBottom(wrappedElement)) {\n            this.props._getRooms();\n        }\n    };\n\n    onNewRoomButtonClicked = () => {\n        this.props._createRoom();\n    }\n\n\n    render() {\n        const { roomIds, isGettingRooms } = this.props;\n\n        return (\n            <div id=\"room-screen\">\n                <div id=\"room-screen-container\" className=\"container grid-sm\">\n                    <div className=\"room-status-container\">\n                        {/* New room button */}\n                        <button className=\"add-button\" onClick={ this.onNewRoomButtonClicked }>New room</button>\n\n                        {/* Total room status */}\n                        {/* <span>Total rooms: { totalRooms }</span> */}\n                    </div>\n\n                    {/* List rooms */}\n                    <table className=\"table table-hover\">\n                        <tbody>\n                            {_.map(roomIds, (roomId) => (\n                                <RoomItem key={ roomId } roomId={ roomId } />\n                            ))}\n                        </tbody>\n                    </table>\n\n                    <div className=\"spinner\">\n                        <BeatLoader size={ 8 } color=\"#95a5a6\" loading={ isGettingRooms } />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\n\nconst mapStateToProps = ({ room, user }) => ({\n    totalRooms: room.total,\n    roomIds: sortedRoomIdsSelector(room, user),\n    isGettingRooms: room.isGettingRooms,\n    creatingRoom: room.creatingRoom,\n    currentRoomId: room.currentRoomId,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n    _getRooms: (shouldRefresh) => {\n        return dispatch(room_GET_ROOMS(shouldRefresh));\n    },\n    _createRoom: () => {\n        return dispatch(room_NEW_ROOM());\n    },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RoomScreen);\n","import React, { PureComponent, Fragment } from 'react';\nimport { connect } from 'react-redux';\n\nimport { SquareType } from 'caro-config';\nimport { squareSelector, winningSquareSelector, match_STROKE } from 'caro-store/match';\nimport oImage from 'caro-assets/images/o.png';\nimport xImage from 'caro-assets/images/x.png';\n\nimport './CaroBoardSquare.scss';\n\n\nclass CaroBoardSquare extends PureComponent {\n\n    stroke = () => {\n        const { row, column } = this.props;\n        this.props._stroke(row, column);\n    }\n\n    renderXO = () => {\n        const { squareType } = this.props;\n\n        if (!squareType) {\n            return null;\n        }\n\n        return (\n            <Fragment>\n                {squareType === SquareType.O ? (\n                    <img className=\"caro-board-image\" alt=\"o\" src={ oImage } />\n                ) : (\n                    <img className=\"caro-board-image\" alt=\"x\" src={ xImage } />\n                )}\n            </Fragment>\n        );\n    }\n\n    renderWinningOverlay() {\n        const { isWinningSquare } = this.props;\n\n        if (!isWinningSquare) {\n            return;\n        }\n\n        return (\n            <div className=\"caro-board-square-winning\"></div>\n        );\n    }\n\n    render() {\n        return (\n            <div id=\"caro-board-square\" onClick={ this.stroke }>\n                { this.renderXO() }\n                { this.renderWinningOverlay() }\n            </div>\n        );\n    }\n}\n\n\nconst mapStateToProps = ({ match }, ownProps) => ({\n    squareType: squareSelector(match, ownProps.row, ownProps.column),\n    isWinningSquare: winningSquareSelector(match, ownProps.row, ownProps.column),\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n    _stroke: (row, column) => {\n        return dispatch(match_STROKE(row, column));\n    }\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CaroBoardSquare);\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\nimport _ from 'lodash';\n\nimport Config from 'caro-config';\nimport CaroBoardSquare from './CaroBoardSquare';\n\nimport './CaroBoard.scss';\n\n\nclass CaroBoard extends PureComponent {\n\n    render() {\n        return (\n            <div id=\"caro-board\">\n                {/* Render row */}\n                {_.map(new Array(Config.CARO_BOARD_ROW), (row, rowIndex) => (\n                    <div className=\"caro-board-row\" key={ rowIndex }>\n                        {/* Render column */}\n                        {_.map(new Array(Config.CARO_BOARD_COLUMN), (col, columnIndex) => (\n                            <CaroBoardSquare key={ columnIndex } row={ rowIndex } column={ columnIndex } />\n                        ))}\n                    </div>\n                ))}\n            </div>\n        );\n    }\n}\n\n\nconst mapStateToProps = () => ({\n\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n \n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CaroBoard);\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\n\nimport { scoreSelector } from 'caro-store/score';\n\n\nclass UserScore extends PureComponent {\n\n    render() {\n        const { score } = this.props;\n\n        return (\n            <div className=\"chip\">\n                Wins: { score }\n            </div>\n        );\n    }\n}\n\n\nconst mapStateToProps = ({ score }, ownProps) => ({\n    score: scoreSelector(score, ownProps.userId, ownProps.competitorUserId),\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n \n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserScore);\n","import React, { PureComponent, Fragment } from 'react';\nimport { connect } from 'react-redux';\n\nimport { otherUserSelector } from 'caro-store/user';\nimport UserScore from './UserScore';\n\nimport './CompetitorUser.scss';\n\n\nclass CompetitorUser extends PureComponent {\n\n    render() {\n        const { competitorUser, userId } = this.props;\n\n        return (\n            <div id=\"current-user\">\n                {competitorUser ? (\n                    <Fragment>\n                        <img className=\"user-avatar\" alt=\"avatar\" src={ competitorUser.avatar } />\n                        <p className=\"user-name text-bold\">{ competitorUser.username }</p>\n                        \n                        <UserScore userId={ competitorUser.id } competitorUserId={ userId } />\n\n                        {/* Toolbox */}\n                        <div className=\"tool-box\">\n                            \n                        </div>\n                    </Fragment>\n                ) : (\n                    <p>Waiting user...</p>\n                )}\n            </div>\n        );\n    }\n}\n\n\nconst mapStateToProps = ({ user }, ownProps) => ({\n    competitorUser: otherUserSelector(user, ownProps.competitorUserId),\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CompetitorUser);\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\n\nimport UserScore from './UserScore';\nimport './CurrentUser.scss';\n\n\nclass CurrentUser extends PureComponent {\n\n    render() {\n        const { currentUser, competitorUserId } = this.props;\n\n        return (\n            <div id=\"current-user\">\n                <img className=\"user-avatar\" alt=\"avatar\" src={ currentUser.avatar } />\n                <p className=\"user-name text-bold\">{ currentUser.username }</p>\n                \n                <UserScore userId={ currentUser.id } competitorUserId={ competitorUserId } />\n\n                {/* Toolbox */}\n                <div className=\"tool-box\">\n                    \n                </div>\n            </div>\n        );\n    }\n}\n\n\nconst mapStateToProps = ({ user }) => ({\n    currentUser: user.currentUser,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n \n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CurrentUser);\n","import React, { PureComponent } from 'react';\nimport { connect } from 'react-redux';\n\nimport { showConfirmAlert } from 'caro-service/AlertService';\nimport { showSpinner, hideSpinner } from 'caro-service/SpinnerService';\nimport { roomSelector, room_OUT_ROOM } from 'caro-store/room';\nimport { match_READY_NEW_GAME, match_REMATCH } from 'caro-store/match';\nimport CaroBoard from './CaroBoard';\nimport CompetitorUser from './CompetitorUser';\nimport CurrentUser from './CurrentUser';\n\nimport './MatchScreen.scss';\n\n\nclass MatchScreen extends PureComponent {\n\n    componentWillMount() {\n        if (!this.props.room) {\n            this.props.history.push('/rooms');\n        }\n    }\n\n    componentDidMount() {\n        window.addEventListener('popstate', this.onBackButtonPressed, false);\n    }\n\n    componentDidUpdate(prevProps) {\n        const {\n            history,\n            winnerId,\n            currentUser,\n            currentUserReadyNewGame,\n            competitorUserReadyNewGame,\n            room,\n            _playNewGame,\n            _reMatch,\n            _exitRoom,\n        } = this.props;\n\n        if (prevProps.room && !room) {\n            history.push('/rooms');\n            return;\n        }\n\n        if (!prevProps.winnerId && winnerId) {\n            const didCurrentUserWin = (winnerId === currentUser.id);\n            const title = didCurrentUserWin ? 'You win' : 'You lose';\n\n            showConfirmAlert({\n                title: title,\n                message: 'Play new game?',\n                cancelText: 'Exit room',\n                onConfirm: () => {\n                    _playNewGame();\n                },\n                onCancel: () => {\n                    _exitRoom();\n                }, // Out room\n            });\n        }\n\n        if (!prevProps.currentUserReadyNewGame && currentUserReadyNewGame) {\n            showSpinner();\n        }\n\n        if (prevProps.currentUserReadyNewGame && !currentUserReadyNewGame) {\n            hideSpinner();\n        }\n\n        if (\n            currentUserReadyNewGame &&\n            competitorUserReadyNewGame &&\n            (!prevProps.currentUserReadyNewGame || !prevProps.competitorUserReadyNewGame)\n        ) {\n            _reMatch();\n        }\n    }\n\n    onBackButtonPressed = () => {\n        this.props._exitRoom();\n    }\n    \n    onExitRoomButtonClicked = () => {\n        this.props._exitRoom();\n    }\n\n    render() {\n        const { room, currentUser } = this.props;\n\n        if (!room) {\n            return null;\n        }\n\n        const competitorUserId = room.creatorUserId === currentUser.id ? room.competitorUserId : room.creatorUserId;\n\n\n        return (\n            <div id=\"match-screen\">\n                <CaroBoard />\n\n                {/* Users info */}\n                <div className=\"user-container\">\n                    <CompetitorUser userId={ currentUser.id } competitorUserId={ competitorUserId } />\n                    <CurrentUser competitorUserId={ competitorUserId } />\n\n                    {/* Exit room button */}\n                    <button className=\"exit-button\" onClick={ this.onExitRoomButtonClicked }>\n                        <i className=\"fas fa-sign-out-alt fa-lg text-dark\"></i>\n                    </button>\n                </div>\n            </div>\n        );\n    }\n}\n\n\nconst mapStateToProps = ({ room, user, match }) => ({\n    room: roomSelector(room, room.currentRoomId),\n    currentUser: user.currentUser,\n    winnerId: match.winnerId,\n    currentUserReadyNewGame: match.currentUserReadyNewGame,\n    competitorUserReadyNewGame: match.competitorUserReadyNewGame,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n    _playNewGame: () => {\n        return dispatch(match_READY_NEW_GAME());\n    },\n    _reMatch: () => {\n        return dispatch(match_REMATCH());\n    },\n    _exitRoom: () => {\n        return dispatch(room_OUT_ROOM());\n    },\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MatchScreen);\n","import React, { PureComponent } from 'react';\nimport { BrowserRouter, Route } from 'react-router-dom';\n\n// Screens\nimport LoginScreen from 'caro-screens/LoginScreen/LoginScreen';\nimport RoomsScreen from 'caro-screens/RoomScreen/RoomScreen';\nimport MatchScreen from 'caro-screens/MatchScreen/MatchScreen';\n\nexport default class Router extends PureComponent {\n    render() {\n        return (\n            <BrowserRouter>\n                <div id=\"router\">\n                    <Route path=\"/\" exact component={ LoginScreen } />\n                    <Route path=\"/rooms\" exact component={ RoomsScreen } />\n                    <Route path=\"/match\" exact component={ MatchScreen } />\n                </div>\n            </BrowserRouter>\n        );\n    }\n}\n","import React, { Component } from 'react';\nimport { Provider } from 'react-redux';\nimport { PersistGate } from 'redux-persist/integration/react';\n\nimport store, { persistor } from 'caro-store';\nimport Router from './Router';\n\n// Reset css\nimport 'normalize.css';\n\n// Spectre css framework\nimport 'spectre.css/dist/spectre.min.css';\nimport 'spectre.css/dist/spectre-exp.min.css';\nimport 'spectre.css/dist/spectre-icons.min.css';\n\n// Caro style\nimport 'caro-styles/index.scss';\n\n// React confirm alert\nimport 'react-confirm-alert/src/react-confirm-alert.css';\n\n\n// Run socket\nimport 'caro-socket';\n\n\nclass App extends Component {\n    render() {\n        return (\n            <Provider store={ store }>\n                <PersistGate loading={ null } persistor={ persistor }>\n                    <Router />\n                </PersistGate>\n            </Provider>\n        );\n    }\n}\n\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\n\nReactDOM.render(<App />, document.getElementById('root'));\n","const combineHandlers = (handlers = []) => {\n    return (eventName, params) => {\n        for (let i = 0; i < handlers.length; i++) {\n            setImmediate(() => {\n                handlers[i](eventName, params);\n            });\n        }\n    };\n};\n\n\nexport default combineHandlers;","module.exports = {\n  WAITING: 'WAITING',\n  PLAYING: 'PLAYING'\n};","module.exports = __webpack_public_path__ + \"static/media/o.daaada35.png\";","module.exports = \"data:image/png;base64,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\""],"sourceRoot":""}